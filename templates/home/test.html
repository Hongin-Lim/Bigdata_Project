{% extends 'home/base.html' %}
{% load static %}
{% block body %}
<div id="main">
    <div id="content">

        <div id="qnb" class="quick-navigation" style="top: 70px;">
            <style>
    #qnb{position:absolute;z-index:1;right:20px;top:70px;width:80px;font:normal 12px/16px "Noto Sans";color:#333;letter-spacing:-0.3px;transition:top 0.2s}
    .goods-goods_view #qnb{top:20px}
    /* 배너 */
    #qnb .bnr_qnb{padding-bottom:7px}
    #qnb .bnr_qnb .thumb{width:80px;height:120px;vertical-align:top}
    /* 메뉴 */
    #qnb .side_menu{width:80px;border:1px solid #ddd;border-top:0 none;background-color:#fff}
    #qnb .link_menu{display:block;height:29px;padding-top:5px;border-top:1px solid #ddd;text-align:center}
    #qnb .link_menu:hover,
    #qnb .link_menu.on{color:#5f0080}
    /* 최근본상품 */
    #qnb .side_recent{position:relative;margin-top:6px;border:1px solid #ddd;background-color:#fff}
    #qnb .side_recent .tit{display:block;padding:22px 0 6px;text-align:center}
    #qnb .side_recent .list_goods{overflow:hidden;position:relative;width:60px;margin:0 auto}
    #qnb .side_recent .list{position:absolute;left:0;top:0}
    #qnb .side_recent .link_goods{display:block;overflow:hidden;width:60px;height:80px;padding:1px 0 2px}
    #qnb .side_recent .btn{display:block;overflow:hidden;width:100%;height:17px;border:0 none;font-size:0;line-height:0;text-indent:-9999px}

    #qnb .side_recent .btn_up{position:absolute;left:0;top:0;background:url(https://res.kurly.com/pc/service/main/2002/ico_quick_up_hover.png) no-repeat 50% 50%}
    #qnb .side_recent .btn_up.off{background:url(https://res.kurly.com/pc/service/main/2002/ico_quick_up.png) no-repeat 50% 50%}
    #qnb .side_recent .btn_down{background:url(https://res.kurly.com/pc/service/main/2002/ico_quick_down_hover.png) no-repeat 50% 0}
    #qnb .side_recent .btn_down.off{background:url(https://res.kurly.com/pc/service/main/2002/ico_quick_down.png) no-repeat 50% 0}


    @media
    only screen and (-webkit-min-device-pixel-ratio: 1.5),
    only screen and (min-device-pixel-ratio: 1.5),
    only screen and (min-resolution: 1.5dppx) {
        #qnb .side_recent .btn_up{background-image:url(https://res.kurly.com/pc/service/main/2002/ico_quick_up_hover_x2.png);background-size:12px 18px}
        #qnb .side_recent .btn_down{background-image:url(https://res.kurly.com/pc/service/main/2002/ico_quick_down_hover_x2.png);background-size:12px 18px}
        #qnb .side_recent .btn_up.off{background-image:url(https://res.kurly.com/pc/service/main/2002/ico_quick_up_x2.png);background-size:12px 18px}
        #qnb .side_recent .btn_down.off{background-image:url(https://res.kurly.com/pc/service/main/2002/ico_quick_down_x2.png);background-size:12px 18px}
    }
    @media all and (max-width: 1250px){
        #qnb{display:none}
    }


            </style>

            <div class="bnr_qnb" id="brnQuick"><a href="/shop/board/view.php?id=notice&amp;no=64" id="brnQuickObj">
                <img class="thumb" src="https://res.kurly.com/pc/service/main/1904/bnr_quick_20190403.png"
                     alt="퀄리티있게 샛별배송">
            </a>
                <script>
    var brnQuickScript = (function(){
        var $target = $('#brnQuickObj'), $targetThumb = $('#brnQuickObj .thumb');
        // 시간체크
        function timeCheck(){
            var now = brnQuick.nowTime; // 호출 하는 js에서 변수선언되어 가져다 사용
            if( new Date('2020-12-31T11:00:00+09:00').getTime() <= now && now < new Date('2021-01-15T11:00:00+09:00').getTime() ){
              $target.attr('href', '/shop/event/kurlyEvent.php?htmid=event/2020/1231/newyearsday');
              $targetThumb.attr('src', 'https://res.kurly.com/pc/service/main/2012/bnr_quick.png');
              $targetThumb.attr('alt', '2021 설 선물');
            }else if(  new Date('2021-01-15T11:00:00+09:00').getTime() <= now && now <= new Date('2021-02-10T23:00:00+09:00').getTime() ){
              $target.attr('href', '/shop/event/kurlyEvent.php?htmid=event/2021/0115/newyearsday');
              $targetThumb.attr('src', 'https://res.kurly.com/pc/service/main/2101/bnr_quick.png');
              $targetThumb.attr('alt', '2021 설 선물');
            }
        }
        return {
            timeCheck : timeCheck
        }
    })();
    brnQuickScript.timeCheck();


                </script>


            </div>
            <script>
    var brnQuick = {
        nowTime : '1652839655199',
        update : function(){
            $.ajax({
                url : campaginUrl + 'pc/service/bnr_quick.html'
            }).done(function(result){
                $('#brnQuick').html(result);
            });
        }
    }
    brnQuick.update();


            </script>

            <div class="side_menu">
                <a href="/shop/main/html.php?htmid=event/kurly.htm&amp;name=lovers" class="link_menu ">등급별 혜택</a>
                <a href="/shop/board/list.php?id=recipe" class="link_menu ">레시피</a>
                <a href="/shop/goods/goods_review_best.php" class="link_menu ">베스트 후기</a>
            </div>
            <div class="side_recent" style="display:none">
                <strong class="tit">최근 본 상품</strong>
                <div class="list_goods" data-height="209" style="height: 0px;">
                    <ul class="list"></ul>
                </div>
                <button type="button" class="btn btn_up off">최근 본 상품 위로 올리기</button>
                <button type="button" class="btn btn_down off">최근 본 상품 아래로 내리기</button>
            </div>
            <script>
/**
 * 상품상세일때 현재 보고 있는 상품 담기. 상품URL & 상품이미지
 * 최종 저장 날짜로 부터 24시가 지날시 localStorage 삭제
 */
var getGoodsRecent = (function(){
    var i, len, getGoodsRecent, item, _nowTime = '1652839655199';

    _goodsRecent();
    function _goodsRecent(){
        if(localStorage.getItem('goodsRecent') === null){
            return false;
        }

        try{
            getGoodsRecent = JSON.parse(localStorage.getItem("goodsRecent"));
            len = getGoodsRecent.length;
            if(addDays(getGoodsRecent[len - 1].time, 1) < _nowTime){
                localStorage.removeItem('goodsRecent');
            }else{
                for(i = 0; i < len; i++){
                    item = '<li><a class="link_goods" href="/shop/goods/goods_view.php?goodsno=' + getGoodsRecent[i].no + '"><img src="' + getGoodsRecent[i].thumb + '" alt=""></a></li>';
                    $('.side_recent .list').append(item);
                }
                $('.side_recent').show();
            }
        } catch(e){
            console.log("JSON parse error from the Quick menu goods list!!!", e);
        }
    }

    function addDays(date, days){
        var result = new Date(date);
        result.setDate(result.getDate() + days);
        return result.getTime();
    }

    // return {
    // }
})();


            </script>
        </div>
        <style>
#main{min-height: 100vh}


        </style>
        <link rel="stylesheet" type="text/css" href="/asset/css/cart/list.bundle.css?ver=1.70.5">
        <link rel="preload" as="script" href="/asset/js/cart/list.bundle.js?ver=1.70.5">
        <h3 class="screen_out">장바구니 상품 목록</h3>
        <form>
            <div id="cartItemList" class="only_pc" style="min-height: 587px;">
                <div class="">
                    <div class="cart_item ">
                        <div class="cart_select">
                            <div class="inner_select"><label class="check"><input type="checkbox" name="checkAll"
                                                                                  checked=""><span class="ico"></span>전체선택
                                (2/2)</label><a href="#none" class="btn_delete">선택삭제</a></div>
                        </div>
                        <div class="box cold">
                            <div class="tit_box"><h4 class="tit"><span class="inner_tit"><span class="ico"></span>냉장 상품</span>
                            </h4>
                                <button type="button" class="btn_dropup ">접기 / 펼치기</button>
                            </div>
                            <ul class="list ">
                                <li>
                                    <div class="item"><label class="check"
                                                             for="chkItemd929e7f7-9bae-417d-ba0e-1b574bca65e3"><input
                                            type="checkbox" id="chkItemd929e7f7-9bae-417d-ba0e-1b574bca65e3"
                                            name="chkItem" data-item-id="d929e7f7-9bae-417d-ba0e-1b574bca65e3"
                                            data-item-no="3458" data-item-parent-no="3458" checked=""><span
                                            class="ico"></span></label>
                                        {% for item in cart %}
                                        {% with product=item.product %}
                                        <div class="name">
                                            <div class="inner_name">
                                                <div class="info">{{ product.name }}</div>
                                            </div>
                                        </div>
                                        <div class="goods"><a href="{{ product.get_absolute_url }}" class="thumb "
                                                              style="background-image: url({{ product.image.url }});">상품이미지</a>
                                            <div class="price">
                                                <div class="in_price"><span class="selling">12,510<span
                                                        class="won">원</span></span><span class="cost">13,900<span
                                                        class="won">원</span></span>
                                                    <p class="noti"></p></div>
                                                <div class="stamper count">
                                                    <button type="button" class="btn minus off"
                                                            data-item-id="d929e7f7-9bae-417d-ba0e-1b574bca65e3"
                                                            data-item-no="3458" data-opt="decrease">감소
                                                    </button>
                                                    <input type="number" id="stepperCounter" class="num" readonly=""
                                                           value="1">
                                                    <button type="button" class="btn plus"
                                                            data-item-id="d929e7f7-9bae-417d-ba0e-1b574bca65e3"
                                                            data-item-no="3458" data-opt="increase">추가
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <button type="button" class="btn_delete"
                                                data-item-id="d929e7f7-9bae-417d-ba0e-1b574bca65e3" data-item-no="3458"
                                                data-type="cold">상품 삭제
                                        </button>
                                    </div>
                                </li>
                                <li>
                                    <div class="item"><label class="check"
                                                             for="chkItemd54f133a-5b3d-465a-b754-2cd71e443c26"><input
                                            type="checkbox" id="chkItemd54f133a-5b3d-465a-b754-2cd71e443c26"
                                            name="chkItem" data-item-id="d54f133a-5b3d-465a-b754-2cd71e443c26"
                                            data-item-no="65510" data-item-parent-no="66426" checked=""><span
                                            class="ico"></span></label>
                                        <div class="name">
                                            <div class="inner_name"><a href="#" class="package ">[스윗밸런스] 허니리코타치즈 샐러드</a><a
                                                    href="#" class="product ">[스윗밸런스] 오늘의 샐러드 6종</a>
                                                <div class="info"></div>
                                            </div>
                                        </div>
                                        <div class="goods"><a href="#" class="thumb "
                                                              style="background-image: url(&quot;https://img-cf.kurly.com/shop/data/goods/1611300007786i0.jpg&quot;);">상품이미지</a>
                                            <div class="price">
                                                <div class="in_price"><span class="selling">4,900<span
                                                        class="won">원</span></span>
                                                    <p class="noti"></p></div>
                                                <div class="stamper count">
                                                    <button type="button" class="btn minus off"
                                                            data-item-id="d54f133a-5b3d-465a-b754-2cd71e443c26"
                                                            data-item-no="65510" data-opt="decrease">감소
                                                    </button>
                                                    <input type="number" id="stepperCounter" class="num" readonly=""
                                                           value="1">
                                                    <button type="button" class="btn plus"
                                                            data-item-id="d54f133a-5b3d-465a-b754-2cd71e443c26"
                                                            data-item-no="65510" data-opt="increase">추가
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <button type="button" class="btn_delete"
                                                data-item-id="d54f133a-5b3d-465a-b754-2cd71e443c26" data-item-no="65510"
                                                data-type="cold">상품 삭제
                                        </button>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="cart_select">
                            <div class="inner_select"><label class="check"><input type="checkbox" name="checkAll"
                                                                                  checked=""><span class="ico"></span>전체선택
                                (2/2)</label><a href="#none" class="btn_delete">선택삭제</a></div>
                        </div>
                    </div>
                    <div class="cart_result">
                        <div class="inner_result" style="top: 60px;">
                            <div class="cart_delivery"><h3 class="tit">배송지</h3>
                                <div class="address"><p class="addr">서울 중랑구 면목동 173-159 202</p>
                                    <div class="cart_delivery_information">
                                        <div class="delivery_type"><span class="delivery star">샛별배송</span></div>
                                    </div>
                                    <a href="#" class="btn default">배송지 변경</a></div>
                            </div>
                            <div class="amount_view">
                                <dl class="amount">
                                    <dt class="tit">상품금액</dt>
                                    <dd class="price"><span class="num">18,800</span><span class="won">원</span></dd>
                                </dl>
                                <dl class="amount">
                                    <dt class="tit">상품할인금액</dt>
                                    <dd class="price"><span class="num minus">1,390</span><span class="won">원</span>
                                    </dd>
                                </dl>
                                <dl class="amount">
                                    <dt class="tit">배송비</dt>
                                    <dd class="price"><span class="num">0</span><span class="won">원</span></dd>
                                </dl>
                                <dl class="amount lst">
                                    <dt class="tit">결제예정금액</dt>
                                    <dd class="price"><span class="num">17,410</span><span class="won">원</span></dd>
                                </dl>
                                <div class="reserve"><span class="bage">적립</span>구매 시 <span class="emph">245원 적립</span>
                                </div>
                            </div>
                            <div class="btn_submit">
                                <button type="submit" class="btn active">주문하기</button>
                            </div>
                            <div class="notice"><span class="txt"><span
                                    class="ico">·</span>쿠폰/적립금은 주문서에서 사용 가능합니다</span><span class="txt"><span
                                    class="ico">·</span>[배송준비중] 이전까지 주문 취소 가능합니다.</span><span class="txt"><span
                                    class="ico">·</span>[마이컬리 &gt; 주문내역 상세페이지] 에서 직접 취소하실 수 있습니다.</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </form>

        <form id="viewCart" name="frmCart" method="post" action="/shop/order/order.php">
            <input type="hidden" name="mode" value="setOrder">
        </form>
        <script src="/appProxy/appData.php?ver=1.70.5"></script>
        <script src="/asset/js/cart/list.bundle.js?ver=1.70.5"></script>
        <script>
  _cart.showItemList('pc');

  /**
   * 스크롤 이벤트 : CartContainer.jsx 에서 호출
   * 스크립트 재시작 요건
   * 아이템 삭제시
   * 주소가 변경시
   * 목록접을때
   * 위치 값이 달라지는 경우
   * .off('scroll') 을 사용할수 없음. gnb 때문에
   */
  function resultPosition() {
    var objTarget = {};

    objTarget = {
      winHeight: $(window).height(),
      gnbHeight: $('#gnbMenu').height(),
      moveBox: $('.cart_result').find('.inner_result'),
      boxHeight: $('.cart_result').find('.inner_result').height(),
      baseTop: $('#cartItemList').offset().top - $('#gnbMenu').height()
    }

    var _position = {
      scroll: function(){
        var that = this, num = 0;
        $(window).scroll(function () {
          num = $(this).scrollTop().toFixed(0);
          that.scrollEvent(num);
        }).scroll();
        if(num === 0){
          that.scrollEvent(num);
        }
      },
      scrollEvent: function(num){
        num = num - objTarget.baseTop + objTarget.gnbHeight;
        var baseHeight = $('#cartItemList').height();
        var resultBox = baseHeight - objTarget.boxHeight;
        if(objTarget.boxHeight > objTarget.winHeight || baseHeight <= objTarget.boxHeight){
          num = 0;
          $('#cartItemList').css({'minHeight' : objTarget.boxHeight});
        }
        if(num > resultBox){
          num = resultBox;
        }
        objTarget.moveBox.css({ top: num <= 60 ? 60 : num });
      }
    }

    _position.scroll();
  }

  KurlyTracker.setScreenName('cart');

  function reloadAction(){
    location.reload();
  }


        </script>
    </div>
</div>
{% endblock %}